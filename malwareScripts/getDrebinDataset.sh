#!/bin/bash

# Retrieve and unzip the drebin dataset.  This will not work if you
# have not requested and been granted access to the dataset.
# This may take up to a few hours depending on your internet connection,
# and will result in a download of ~7GB of data. 

# if there is not already a malware directory, create it
dirName=$1
mkdir -p ${dirName}

if [ -n "$(ls -A ${dirName})" ]; then
	echo "Please ensure the malware directory is empty before running this script ($0)"
	exit 1
fi

# download the zip files from the drebin server
curl -o ${dirname}/drebin0.zip https://www.sec.cs.tu-bs.de/~danarp/drebin/dataset/drebin-0.zip
curl -o ${dirName}/drebin1.zip https://www.sec.cs.tu-bs.de/~danarp/drebin/dataset/drebin-1.zip
curl -o ${dirName}/drebin2.zip https://www.sec.cs.tu-bs.de/~danarp/drebin/dataset/drebin-2%C2%BD.zip
curl -o ${dirName}/drebin3.zip https://www.sec.cs.tu-bs.de/~danarp/drebin/dataset/drebin-33%E2%85%93.zip
curl -o ${dirName}/drebin4.zip https://www.sec.cs.tu-bs.de/~danarp/drebin/dataset/drebin-4.zip
curl -o ${dirName}/drebin5.zip https://www.sec.cs.tu-bs.de/~danarp/drebin/dataset/drebin-5.zip

# unzip each file and then remove the archives

echo "Type the password required for extracting the DREBIN .zip files, and then press [ENTER]:"
read password

unzip -P ${password} ${dirName}/*.zip
rm ${dirName}/*.zip
